async function init(){
  // 1. Rationen laden
  const rtext = await loadCSV(rationCSV);
  const rrows = parseCSV(rtext);
  const headers = rrows[0].map(h=>h.trim());
  for(let i=1;i<rrows.length;i++){
    const name = rrows[i][0].trim();
    if(!name) continue;
    rationen[name]={};
    for(let j=1;j<headers.length;j++){
      const val=parseFloat(rrows[i][j]);
      if(!isNaN(val) && val>0) rationen[name][headers[j]] = val;
    }
  }

  // 2. TS-Werte laden
  const ttext = await loadCSV(tsCSV);
  const trows = parseCSV(ttext);
  for(let i=1;i<trows.length;i++){
    const comp = trows[i][1].trim();
    const ts = parseFloat(trows[i][2]);
    if(!isNaN(ts)) tsWerte[comp] = ts;
  }

  // 3. Letzte Werte aus Fuetterungen
  const fText = await loadCSV(fuetterCSV);
  const fRows = parseCSV(fText);
  for(let i=1;i<fRows.length;i++){
    const ration = fRows[i][1].trim();
    const anz = parseFloat(fRows[i][2]);
    const fak = parseFloat(fRows[i][3]);
    if(ration && !isNaN(anz) && !isNaN(fak)){
      letzte[ration] = {anz,fak};
    }
  }

  // 4. Dropdown füllen und Vorschlag laden
  populateSelect();
}

function populateSelect(){
  const sel = document.getElementById("rationSelect");
  sel.innerHTML="";
  Object.keys(rationen).sort().forEach(r=>{
    const opt = document.createElement("option");
    opt.value = r;
    opt.textContent = r;
    sel.appendChild(opt);
  });
  sel.selectedIndex = 0;
  sel.addEventListener("change", suggest);
  suggest(); // nur aufrufen **nachdem Dropdown gefüllt ist**
}
